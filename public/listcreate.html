<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create new list</title>
</head>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<body>
    <a class="arrowBtn" href="tasklist.html">
        <i class="fas fa-arrow-left" ></i>
    </a><br><br>

    <input id="inpListTitle" type="text" placeholder="Navn pÃ¥ ny liste" /><br />
    <button id="btnCreate"type="submit">Legg til liste<i class="fa fa-plus"></i>
    </button><br />
    <h3 id="txtResult">Result....</h3>
    
    
    <script>

        let inpListTitle = document.getElementById("inpListTitle");
        let btnCreate = document.getElementById("btnCreate");
        let txtResult = document.getElementById("txtResult");


        btnCreate.addEventListener('click', async function(evt){
            
            let url = '/lists';

            let updata = {
                title: inpListTitle.value
            }

            let cfg = {
                method: "POST",
                headers: { "content-type": "application/json" },
                body: JSON.stringify(updata),
                };

                try{
                    let response = await fetch(url, cfg);
                    let data = await response.json();

                    if (response.status != 200) {
                        throw data.error;
                    } else {
                        txtResult.innerHTML = data.msg;
                    }
                } catch(error){
                    txtResult.innerHTML = "something went wrong - check the console window"
                }
        })
      

    </script>
    
</body>
</html>